# Laborat√≥rio AI 900 - Azure Cognitive Search: Utilizando AI Search para indexa√ß√£o e consulta de Dados

Ol√° seja muito bem vindo a mais um laborat√≥rio! Neste aprendemos como configurar e realizar pesquisas utilizando o Azure Cognitive Search. 

## üìù Para que serve o Azure Cognitive Search?

O Azure Cognitive Search √© um servi√ßo de pesquisa baseado na nuvem da Microsoft que fornece recursos avan√ßados de pesquisa de texto e de dados. Ele permite que os desenvolvedores incorporem facilmente capacidades avan√ßadas de pesquisa em aplicativos e sites, proporcionando aos usu√°rios a capacidade de encontrar informa√ß√µes relevantes de maneira r√°pida e eficiente.

## üìù Principais Recursos do Azure Cognitive Search:

- **Pesquisa Avan√ßada:** Suporta pesquisa em texto livre, pesquisa geoespacial, sugest√µes de pesquisa, realce de resultados, autocompletar, sin√¥nimos, classifica√ß√£o e pagina√ß√£o.

- **Integra√ß√£o de IA:** Oferece integra√ß√£o opcional de intelig√™ncia artificial para extrair informa√ß√µes de texto e estruturar conte√∫do.

- **Ferramentas de Desenvolvedor:** Fornece ferramentas e SDKs para v√°rias linguagens de programa√ß√£o, facilitando a integra√ß√£o e o desenvolvimento de aplicativos de pesquisa.

- **Facetas e Filtros Din√¢micos:** Permite aos usu√°rios refinar os resultados da pesquisa por meio de facetas din√¢micas e filtros.

- **Escalabilidade:** Pode lidar com conjuntos de dados de qualquer escala, desde pequenos at√© muito grandes, com capacidade de dimensionamento autom√°tico.

## üìù Para que ele √© usado?

Ele √© usado por diversas √°reas, dentre elas as 3 principais s√£o:

- **E-commerce:** Aprimorar a experi√™ncia do usu√°rio por meio de pesquisa avan√ßada de produtos.

- **Sa√∫de:** Permitir a pesquisa eficiente em registros m√©dicos e documentos cl√≠nicos.

- **Jur√≠dico:** Facilitar a descoberta e an√°lise de documentos legais.

## üìù Como configurar uma pesquisa?

Para configurarmos uma pesquisa no Azure Cognitive Search, primeiro precisamos criar um recurso do Azure AI Search.

**Nota:** Este passo a passo foi feito no portal do Azure traduzido para o Portugu√™s do Brasil. Se voc√™ usou o padr√£o (ingl√™s) ou outro idioma, alguns nomes podem ser um pouco diferentes, fique a vontade para traduzir se preferir.

Passo a passo: 

1. Entre no [portal do Azure](https://portal.azure.com/).

2. Na p√°gina inicial, clique no bot√£o **+ Criar um recurso**, pesquise **Azure AI Search** e crie um recurso Azure AI Search com as seguintes configura√ß√µes:

    - **Assinatura:** sua assinatura do Azure.
    - **Grupo de recursos:** Selecione um grupo ou crie um novo grupo de recursos com um nome √∫nico.
    - **Nome do servi√ßo:** Um nome √∫nico.
    - **Localiza√ß√£o:** Escolha qualquer regi√£o dispon√≠vel(Recomendo utilizar a regi√£o West US, os pre√ßos podem ser mais baratos do que no Brasil).
    - **N√≠vel de pre√ßos:** B√°sico.

3. Selecione **Revisar + criar** e depois de ver a resposta **valida√ß√£o realizada com sucesso**, selecione **Criar**.

4. Ap√≥s a conclus√£o da implanta√ß√£o, selecione **Ir para o recurso**. Na p√°gina de vis√£o geral do Azure AI Search, voc√™ pode adicionar √≠ndices, importar dados e pesquisar √≠ndices criados.

Agora voc√™ precisa criar um recurso de servi√ßos de IA do Azure. Voc√™ precisar√° provisionar um recurso de servi√ßos de IA do Azure que esteja no mesmo local que seu recurso do Azure AI Search. Sua solu√ß√£o de pesquisa usar√° esse recurso para enriquecer os dados no armazenamento de dados com insights gerados por IA.

1. Retorne √† [p√°gina inicial](https://portal.azure.com/) do portal do Azure. Clique no bot√£o **ÔºãCriar um recurso** e pesquise os **servi√ßos de IA do Azure**. Selecione criar um plano de servi√ßos de IA do Azure . Voc√™ ser√° levado a uma p√°gina para criar um recurso de servi√ßos de IA do Azure. Configure-o com as seguintes configura√ß√µes:

    - **Assinatura:** sua assinatura do Azure.
    - **Grupo de recursos:** O mesmo grupo de recursos que seu recurso do Azure AI Search.
    - **Regi√£o:** o mesmo local do recurso do Azure AI Search.
    - **Nome:** Um nome exclusivo.
    - **N√≠vel de pre√ßos:** Padr√£o S0
Marcar a caixa, **confirmo que li e compreendi todos os termos abaixo:** Selecionado.

2. Selecione **Revisar + criar.** Depois de ver a resposta **Valida√ß√£o realizada com sucesso**, selecione **Criar**.

3. Aguarde a conclus√£o da implanta√ß√£o e visualize os detalhes da implanta√ß√£o.

Por √∫ltimo, crie uma conta de armazenamento:

1. Retorne √† [p√°gina inicial](https://portal.azure.com/) do portal do Azure e selecione o bot√£o **+ Criar um recurso**.

2. Procure conta de armazenamento e crie um recurso **de conta de armazenamento** com as seguintes configura√ß√µes:

    - **Assinatura**: sua assinatura do Azure.
    - **Grupo de recursos:** O mesmo grupo de recursos que os recursos do Azure AI Search e dos servi√ßos Azure AI.
    - **Nome da conta de armazenamento:** um nome exclusivo.
    - **Localiza√ß√£o:** Escolha qualquer localiza√ß√£o dispon√≠vel(Recomendo utilizar a regi√£o West US, os pre√ßos podem ser mais baratos do que no Brasil).
    - **Desempenho:** Padr√£o
    - **Redund√¢ncia:** armazenamento localmente redundante (LRS).

Pronto, sua pesquisa j√° est√° configurada.

## üìù Como carregar documentos para o armazenamento do Azure

1. No painel do menu esquerdo, selecione **Containers**.

2. Selecione **+ Cont√™iner**. Um painel do seu lado direito √© aberto.

3. Insira as seguintes configura√ß√µes e clique em Criar :
    - **Nome:** O nome padr√£o vir√° como "Coffee-Reviews", por√©m o portal do Azure n√£o ir√° deixar utilizar esse nome por conter letras mai√∫sculas e tra√ßo, nesse caso renomeie para "coffeereviwes".
    - **N√≠vel de acesso p√∫blico:** Container (acesso de leitura an√¥nimo para containers e blobs).
    - **Avan√ßado:** sem altera√ß√µes.

4. Em uma nova guia do navegador, baixe as avalia√ß√µes de caf√© compactadas clicando [aqui](https://aka.ms/mslearn-coffee-reviews) ou copie e cole o seguinte link "https://aka.ms/mslearn-coffee-reviews" e ap√≥s extraia os arquivos para a pasta de avalia√ß√µes que voc√™ ir√° usar.

5. No portal do Azure, selecione o cont√™iner de avalia√ß√µes de caf√© . No cont√™iner, selecione **Carregar**.

6. No painel **Carregar blob**, selecione **Selecionar um arquivo**.

7. Na janela do Explorer, selecione **todos** os arquivos na pasta de avalia√ß√µes que voc√™ acabou de extrair, selecione **Abrir** e, em seguida, selecione **Carregar**.

8. Depois que o upload for conclu√≠do, voc√™ poder√° fechar o painel **Upload blob**. Seus documentos est√£o agora em seu cont√™iner de armazenamento de avalia√ß√µes de caf√©.

## üìù Como indexar documentos

Depois de armazenar os documentos, voc√™ poder√° usar o Azure AI Search para extrair insights dos documentos. O portal do Azure fornece um assistente de importa√ß√£o de dados . Com este assistente, voc√™ pode criar automaticamente um √≠ndice e um indexador para fontes de dados suportadas. Voc√™ usar√° o assistente para criar um √≠ndice e importar seus documentos de pesquisa do armazenamento para o √≠ndice do Azure AI Search.

1. No portal do Azure, navegue at√© o recurso Azure AI Search. Na p√°gina **Vis√£o geral**, selecione **Importar dados**.

2. Na p√°gina **Conectar-se aos seus dados**, na lista **Fonte de Dados**, selecione **Azure Blob Storage**. Preencha os detalhes do armazenamento de dados com os seguintes valores:

    - **Fonte de dados:** Armazenamento de Blobs do Azure
    - **Nome da fonte de dados :** coffee-customer-data
    - **Dados a extrair:** Conte√∫do e metadados
    - **Modo de an√°lise:** Padr√£o
    - **Cadeia de conex√£o :** *Selecione **Escolha uma conex√£o existente**. Selecione sua conta de armazenamento, selecione o cont√™iner de **avalia√ß√µes de caf√©** e clique em **Selecionar**.
    - **Autentica√ß√£o de identidade gerenciada:** Nenhuma
    - **Nome do cont√™iner:** esta configura√ß√£o √© preenchida automaticamente depois que voc√™ escolhe uma conex√£o existente .
    - **Pasta Blob:** deixe em branco .
    - **Descri√ß√£o:** Avalia√ß√µes sobre Fourth Coffee Shops.

3. Selecione **Pr√≥ximo: Adicionar habilidades cognitivas (opcional)**.

4. Na sec√ß√£o **Anexar Servi√ßos Cognitivos**, selecione o seu recurso de servi√ßos Azure AI.

5. Na se√ß√£o **Adicionar enriquecimentos**:

    - Altere o **ome da qualifica√ß√£o**para **offee-skillset**.
    - Marque a caixa de sele√ß√£o **abilitar OCR e mesclar todo o texto no campo merged_content**.
        - Observa√ß√£o: √â importante selecionar **Habilitar OCR** para ver todas as op√ß√µes de campo enriquecido.

    - Certifique-se de que o **campo Dados de origem** esteja configurado como **merged_content**.
    - Altere o **n√≠vel de granularidade de enriquecimento** para **P√°ginas (blocos de 5.000 caracteres)**.
    - N√£o selecione Habilitar enriquecimento incremental.

    Selecione os seguintes campos enriquecidos:

|Habilidade Cognitiva| 	|Par√¢metro|	|Nome do campo|
|--------------------|--|---------|-|-------------|
|Extraia nomes de locais|	|| 	|Localiza√ß√µes|
|Extraia frases-chave|	|| 	|rases chave|
|Detectar sentimento|	 ||	|sentimento|
|Gerar tags de imagens|	 ||	|imagemTags|
|Gere legendas de imagens|	|| 	|legenda da imagem|

6. Em **alvar enriquecimentos em um armazenamento de conhecimento**, selecione:
    - Proje√ß√µes de imagem
    - Documentos
    - P√°ginas
    - Frases chave
    - Entidades
    - Detalhes da imagem
    - Refer√™ncias de imagem

7. Selecione **proje√ß√µes de blob do Azure: Documento**. Uma configura√ß√£o para o nome do cont√™iner com as exibi√ß√µes preenchidas automaticamente do cont√™iner de armazenamento de conhecimento . N√£o altere o nome do cont√™iner.

8. Selecione **r√≥ximo: Personalizar √≠ndice de destino**. Altere o **nome do √≠ndice** para **coffee-index**.

9. Certifique-se de que a **chave** esteja configurada como **metadata_storage_path**. Deixe o ** do sugeridor** em branco e o **modo de pesquisa** preenchido automaticamente.

10. Revise as configura√ß√µes padr√£o dos campos de √≠ndice. Selecione **filtr√°vel** para todos os campos que j√° est√£o selecionados por padr√£o.

11. Selecione **Pr√≥ximo: Criar um indexador**.

12. Altere o **nome do indexador** para **coffee-indexer**.

13. Deixe a **programa√ß√£o** definida como **Uma vez**.

14. Expanda as **op√ß√µes avan√ßadas**. Certifique-se de que a op√ß√£o **Base-64 Encode Keys** esteja selecionada, pois as chaves de codifica√ß√£o podem tornar o √≠ndice mais eficiente.

15. Selecione **Enviar** para criar a fonte de dados, o conjunto de habilidades, o √≠ndice e o indexador. O indexador √© executado automaticamente e executa o pipeline de indexa√ß√£o, que:
    - Extrai os campos de metadados do documento e o conte√∫do da fonte de dados.
    - Executa o conjunto de habilidades cognitivas para gerar campos mais enriquecidos.
    - Mapeia os campos extra√≠dos para o √≠ndice.

16. Volte √† p√°gina de recursos do Azure AI Search. No painel esquerdo, em **Gerenciamento de pesquisa** , selecione **Indexadores** . Selecione o **indexador de caf√©** rec√©m-criado . Espere um minuto e selecione **‚Üª Atualize** at√© que o **Status** indique sucesso.

17. Selecione o nome do indexador para ver mais detalhes.

> Com isso, sabemos como configurar uma pesquisa, como carregar documentos para o armazenamento do Azure e como indexar documentos, para mais detalhes al√©m deste, sugiro que voc√™ pesquise e estude a documenta√ß√£o clicando [aqui](https://microsoftlearning.github.io/mslearn-ai-fundamentals/Instructions/Labs/11-ai-search.html#azure-resources-needed).

## üì≤ Conete-se comigo
[![Perfil DIO](https://img.shields.io/badge/-Meu%20Perfil%20na%20DIO-000?style=for-the-badge&logo=gitbook&logoColor=white)](https://www.dio.me/users/juninho_snowpb)
[![GitHub](https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white)](https://github.com/RogerioFelipeJr)
[![LinkedIn](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/rogerio-felipe-jr/)
[![Gmail](https://img.shields.io/badge/Gmail-333333?style=for-the-badge&logo=gmail&logoColor=white)](mailto:rogeriofj7@gmail.com)
[![Instagram](https://img.shields.io/badge/-Instagram-%23E4405F?style=for-the-badge&logo=instagram&logoColor=white)](https://www.instagram.com/rogeriolucena1/)
[![WhatsApp](https://img.shields.io/badge/WhatsApp-25D366?style=for-the-badge&logo=whatsapp&logoColor=white)](https://wa.me/+5581993846505)

## üíª Habilidades

![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)
![Java](https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=openjdk&logoColor=white)
![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)
![Next](https://img.shields.io/badge/Next-black?style=for-the-badge&logo=next.js&logoColor=white)
![Bootstrap](https://img.shields.io/badge/-boostrap-0D1117?style=for-the-badge&logo=bootstrap&labelColor=0D1117)
![MySQL](https://img.shields.io/badge/MySQL-00000F?style=for-the-badge&logo=mysql&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-000?style=for-the-badge&logo=postgresql)
![Git](https://img.shields.io/badge/GIT-E44C30?style=for-the-badge&logo=git&logoColor=white)
[![GitHub](https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white)](https://github.com/)
![Figma](https://img.shields.io/badge/Figma-696969?style=for-the-badge&logo=figma&logoColor=figma)
![NodeJS](https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white)


![GitHub Stats](https://github-readme-stats.vercel.app/api?username=RogerioFelipeJr&theme=transparent&bg_color=000&border_color=30A3DC&show_icons=true&icon_color=30A3DC&title_color=E94D5F&text_color=FFF)